# 文件系统

磁盘分区完毕后要进行格式化，由于每种操作系统所设置的文件属性/权限并不相同，所有需要将分区进行格式化来存放这些文件，以成为操作系统能够利用的文件系统格式。

传统的磁盘与文件系统，一个分区只能够被格式化为一个文件系统，由于新技术的利用，LVM与软件磁盘列阵等，可以将一个分区格式化为多个文件系统，也能将多个分区合成一个文件系统。所有我们在格式化为称呼一个可被挂载的数据为一个文件系统而不是一个分区。

文件系统会将权限与属性放到inode中，实际数据则放置到数据区块中，另外还有一个超级区块，会记录整个文件系统的整体信息，包括inode与数据区块的总量，使用量，剩余量等。

FAT格式的文件系统，需要时常进行碎片整理，因为文件系统没法一次性知道所有的区块号，需要读取第一个后才知道第二个，并依次读取下去。如果一个文件数据写入的区块太分散，磁头无法在转一圈就读取到所有的数据，所以磁盘会多转好几圈才能完整读取。因此需要碎片整理的原因就是文件写入的区块太过于离散，此时文件读取的性能将会变得很差，这时候需要通过碎片整理将同一个文件所属的区块集合在一起。FAT的文件系统需要碎片整理，ext2是索引式，所以不需要。WIN98以前的操作系统以及U盘主要是FAT，LINUX的正统文件系统是ext2。